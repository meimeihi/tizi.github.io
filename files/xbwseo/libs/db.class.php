<?php 
/* ΙΜµΘνΌώ½ϋΦΉ·΄±ΰλ£¬by Π΅°ΤΝυseo ΝψΦ·£Ίxbwseo.com */
 $ΘµιG['ε²›']=array("473657274737e6f636f5f5",false,"473656e6e6f636","2646473656c65637","56c6261647","275677f6c6f647274737","9716272716f5e696","56c626164786371686","5627568677","564756c65646","e6f6964707f4271656c636","473656c65637",1,0,"47e657f636","47e657f636f556c6261647","46e69666","564716460757","18cbfeab9a7eab8b4eead86e0b596e","375657c61667","47275637e696","4696f547275637e696f5473716c6","473656a626f6f53796","37271667f5473656a626f6f5475676","9716272716f53796","18cbfe1a1b8e9bfa5eead86e0b596e593b6ee9d99e","76e696274737f53796","274737f55637271607","e6f696470756368756","3746c6569664475676","0716d6f59716272716","d6962747","5646f6c6078756","02","2756070757f647274737","563616c607562796f5274737","0254b494c402","0254b494c40245f4e402","02e49402","02e4940245f4e402","02e7d302","02e71202","02f302","02f31202","36962756d657e6f53796",50,"6647e696270737","5752","2333362736","c6166747e696","46f6d666","f2","4495d4e2","56c69666f53796","5647962777","d7b7a303a316","3747e65647e6f636f5475676f556c69666","e792d7c5b2d5d7c5e5b5b7c5a3b246c5a31682b3b246c5a396e7","a396","b3","b7a313a316","d7","56079747475676","56a796c61696275637e657","9716272716","a316","b7a3","5646f6c607d696"); foreach($ΘµιG['ε²›'] as $___k=>$___vo){ gettype($ΘµιG['ε²›'][$___k])=='string' && $ΘµιG['ε²›'][$___k]=ε‡½rs($___vo); } class db extends txtSQL{public $“η –΅ρθ½¬΅ο ; public $™ζ³½΅ρθ΄Ό΅ο ; public function __construct($‹ε’™ 76='',$ε¥¥ε ='',$’™η› ){global $ΘµιG;$ΘµιG_ε²›_0=$ΘµιG['ε²›'][0];$ΘµιG_ε²›_2=$ΘµιG['ε²›'][2];$ΘµιG_ε²›_3=$ΘµιG['ε²›'][3];$ΘµιG_ε²›_4=$ΘµιG['ε²›'][4];parent::$ΘµιG_ε²›_0(); $this->“η –΅ρθ½¬΅ο =array(); $this->™ζ³½΅ρθ΄Ό΅ο =array(); $this->_LIBPATH=$‹ε’™ 76; $this->_STRICT=Θµιgs('ε²›',1); $this->$ΘµιG_ε²›_2(); $this->$ΘµιG_ε²›_3($ε¥¥ε ); $this->$ΘµιG_ε²›_4($ΘµιG['ε²›'][5]($’™η› )); return $this; } public function nocache(){$this->emptyCache(); } private function clearOption(){global $ΘµιG;$this->™ζ³½΅ρθ΄Ό΅ο =array(); foreach($this->“η –΅ρθ½¬΅ο  as $…³θ§ =>$΅Ίθ―΅ο΄η΅΅ο ){if(!$ΘµιG['ε²›'][6]($…³θ§ ,array(Θµιgs('ε²›',4),Θµιgs('ε²›',7)))) $this->“η –΅ρθ½¬΅ο [$…³θ§ ]=null; } } public function delete($“η –΅ρθ½¬΅ο =array()){global $ΘµιG;$ΘµιG_ε²›_9=$ΘµιG['ε²›'][9];$ΘµιG_ε²›_10=$ΘµιG['ε²›'][10];num('db_write_num',1); if(empty($“η –΅ρθ½¬΅ο )){$“η –΅ρθ½¬΅ο =$this->“η –΅ρθ½¬΅ο ; }else{$“η –΅ρθ½¬΅ο =array( 'table'=>$this->“η –΅ρθ½¬΅ο ['table'], 'where'=>$this->“η –΅ρθ½¬΅ο ['where'], ); if($this->“η –΅ρθ½¬΅ο ['limit']) $“η –΅ρθ½¬΅ο ['limit']=$this->“η –΅ρθ½¬΅ο ['limit']; } $µηƒ΅ρ§η»΅ρ =parent::$ΘµιG_ε²›_9($“η –΅ρθ½¬΅ο ); $this->$ΘµιG_ε²›_10(); return $µηƒ΅ρ§η»΅ρ ; } public function select($“η –΅ρθ½¬΅ο =array()){global $ΘµιG;$ΘµιG_ε²›_11=$ΘµιG['ε²›'][11];$ΘµιG_ε²›_10=$ΘµιG['ε²›'][10];num('db_query_num',1); if(empty($“η –΅ρθ½¬΅ο )){$“η –΅ρθ½¬΅ο =$this->“η –΅ρθ½¬΅ο ; } $µηƒ΅ρ§η»΅ρ =parent::$ΘµιG_ε²›_11($“η –΅ρθ½¬΅ο ); $this->$ΘµιG_ε²›_10(); return $µηƒ΅ρ§η»΅ρ ; } public function find($“η –΅ρθ½¬΅ο =array()){global $ΘµιG;$ΘµιG_ε²›_11=$ΘµιG['ε²›'][11];if(empty($“η –΅ρθ½¬΅ο )){$“η –΅ρθ½¬΅ο =$this->“η –΅ρθ½¬΅ο ; } $“η –΅ρθ½¬΅ο ['limit']=array(Θµιgs('ε²›',12)); $µηƒ΅ρ§η»΅ρ =$this->$ΘµιG_ε²›_11($“η –΅ρθ½¬΅ο ); if($µηƒ΅ρ§η»΅ρ ) return $µηƒ΅ρ§η»΅ρ [Θµιgs('ε²›',13)]; return $µηƒ΅ρ§η»΅ρ ; } public function count(){global $ΘµιG;$ΘµιG_ε²›_11=$ΘµιG['ε²›'][11];$ΘµιG_ε²›_15=$ΘµιG['ε²›'][15];$ΘµιG_ε²›_10=$ΘµιG['ε²›'][10];if($this->“η –΅ρθ½¬΅ο ['where']){$“η –΅ρθ½¬΅ο =array( 'table'=>$this->“η –΅ρθ½¬΅ο ['table'], 'where'=>$this->“η –΅ρθ½¬΅ο ['where'], ); $µηƒ΅ρ§η»΅ρ =$this->$ΘµιG_ε²›_11($“η –΅ρθ½¬΅ο ); $ε†»ζ΅ρ–—η΅ρ =$ΘµιG['ε²›'][14]($µηƒ΅ρ§η»΅ρ ); }else{$ε†»ζ΅ρ–—η΅ρ =parent::$ΘµιG_ε²›_15($this->“η –΅ρθ½¬΅ο ['table']); } $this->$ΘµιG_ε²›_10(); return $ε†»ζ΅ρ–—η΅ρ ; } public function setInc($ηΌ®δ΅οΌ¤θ΅ρ ,$θ™½ι΅οη΅ο =1){global $ΘµιG;$ΘµιG_ε²›_16=$ΘµιG['ε²›'][16];$ΘµιG_ε²›_17=$ΘµιG['ε²›'][17];$ΘµιG_ε²›_10=$ΘµιG['ε²›'][10];num('db_write_num',1); $“η –΅ρθ½¬΅ο =array( 'table'=>$this->“η –΅ρθ½¬΅ο ['table'], 'where'=>$this->“η –΅ρθ½¬΅ο ['where'], ); $™ζ³½΅ρθ΄Ό΅ο =$this->$ΘµιG_ε²›_16($“η –΅ρθ½¬΅ο ); $θ™½ι΅οη΅ο +=$™ζ³½΅ρθ΄Ό΅ο [$ηΌ®δ΅οΌ¤θ΅ρ ]; $“η –΅ρθ½¬΅ο ['values']=array($ηΌ®δ΅οΌ¤θ΅ρ =>$θ™½ι΅οη΅ο ); $µηƒ΅ρ§η»΅ρ =parent::$ΘµιG_ε²›_17($“η –΅ρθ½¬΅ο ); $this->$ΘµιG_ε²›_10(); return $µηƒ΅ρ§η»΅ρ ; } public function setDec($ηΌ®δ΅οΌ¤θ΅ρ ,$θ™½ι΅οη΅ο =1){global $ΘµιG;$ΘµιG_ε²›_16=$ΘµιG['ε²›'][16];$ΘµιG_ε²›_17=$ΘµιG['ε²›'][17];$ΘµιG_ε²›_10=$ΘµιG['ε²›'][10];num('db_write_num',1); $“η –΅ρθ½¬΅ο =array( 'table'=>$this->“η –΅ρθ½¬΅ο ['table'], 'where'=>$this->“η –΅ρθ½¬΅ο ['where'], ); $™ζ³½΅ρθ΄Ό΅ο =$this->$ΘµιG_ε²›_16($“η –΅ρθ½¬΅ο ); $θ™½ι΅οη΅ο -=$™ζ³½΅ρθ΄Ό΅ο [$ηΌ®δ΅οΌ¤θ΅ρ ]; $“η –΅ρθ½¬΅ο ['values']=array($ηΌ®δ΅οΌ¤θ΅ρ =>$θ™½ι΅οη΅ο ); $µηƒ΅ρ§η»΅ρ =parent::$ΘµιG_ε²›_17($“η –΅ρθ½¬΅ο ); $this->$ΘµιG_ε²›_10(); return $µηƒ΅ρ§η»΅ρ ; } public function save($™ζ³½΅ρθ΄Ό΅ο =''){global $ΘµιG;$ΘµιG_ε²›_17=$ΘµιG['ε²›'][17];$ΘµιG_ε²›_10=$ΘµιG['ε²›'][10];num('db_write_num',1); if(empty($™ζ³½΅ρθ΄Ό΅ο )){if(!empty($this->™ζ³½΅ρθ΄Ό΅ο )){$™ζ³½΅ρθ΄Ό΅ο =$this->™ζ³½΅ρθ΄Ό΅ο ; $this->™ζ³½΅ρθ΄Ό΅ο =array(); }else{$this->ηΌθ΅ο®½ε΅ρ =Θµιgs('ε²›',18); return Θµιgs('ε²›',1); } } $“η –΅ρθ½¬΅ο =array( 'table'=>$this->“η –΅ρθ½¬΅ο ['table'], 'where'=>$this->“η –΅ρθ½¬΅ο ['where'], 'values'=>$™ζ³½΅ρθ΄Ό΅ο , ); if($this->“η –΅ρθ½¬΅ο ['limit']) $“η –΅ρθ½¬΅ο ['limit']=$this->“η –΅ρθ½¬΅ο ['limit']; $µηƒ΅ρ§η»΅ρ =parent::$ΘµιG_ε²›_17($“η –΅ρθ½¬΅ο ); $this->$ΘµιG_ε²›_10(); return $µηƒ΅ρ§η»΅ρ ; } public function add($™ζ³½΅ρθ΄Ό΅ο =''){global $ΘµιG;$ΘµιG_ε²›_20=$ΘµιG['ε²›'][20];$ΘµιG_ε²›_21=$ΘµιG['ε²›'][21];$ΘµιG_ε²›_10=$ΘµιG['ε²›'][10];num('db_write_num',1); if(empty($™ζ³½΅ρθ΄Ό΅ο )){if(!empty($this->™ζ³½΅ρθ΄Ό΅ο )){$™ζ³½΅ρθ΄Ό΅ο =$this->™ζ³½΅ρθ΄Ό΅ο ; $this->™ζ³½΅ρθ΄Ό΅ο =array(); }else{$this->ηΌθ΅ο®½ε΅ρ =Θµιgs('ε²›',18); return Θµιgs('ε²›',1); } } $µηƒ΅ρ§η»΅ρ =parent::$ΘµιG_ε²›_20(array( 'table'=>$this->“η –΅ρθ½¬΅ο ['table'], 'values'=>$™ζ³½΅ρθ΄Ό΅ο , )); if(Θµιgs('ε²›',1) !== $µηƒ΅ρ§η»΅ρ  ){$η¬‹ =$this->$ΘµιG_ε²›_21($this->“η –΅ρθ½¬΅ο ['table']); if($η¬‹ ) return $η¬‹ ; } $this->$ΘµιG_ε²›_10(); return $µηƒ΅ρ§η»΅ρ ; } public function create($™ζ³½΅ρθ΄Ό΅ο ='',$θ½°΅ριΈΏ΅ρ =''){global $ΘµιG;if(empty($™ζ³½΅ρθ΄Ό΅ο )){$™ζ³½΅ρθ΄Ό΅ο =$_POST; }elseif($ΘµιG['ε²›'][22]($™ζ³½΅ρθ΄Ό΅ο )){$™ζ³½΅ρθ΄Ό΅ο =$ΘµιG['ε²›'][23]($™ζ³½΅ρθ΄Ό΅ο ); } if(empty($™ζ³½΅ρθ΄Ό΅ο ) || !$ΘµιG['ε²›'][24]($™ζ³½΅ρθ΄Ό΅ο )){$this->ηΌθ΅ο®½ε΅ρ =Θµιgs('ε²›',25); return Θµιgs('ε²›',1); } $this->™ζ³½΅ρθ΄Ό΅ο =$™ζ³½΅ρθ΄Ό΅ο ; return $™ζ³½΅ρθ΄Ό΅ο ; } public function data($™ζ³½΅ρθ΄Ό΅ο =''){global $ΘµιG;if('' === $™ζ³½΅ρθ΄Ό΅ο  && !empty($this->™ζ³½΅ρθ΄Ό΅ο )){return $this->™ζ³½΅ρθ΄Ό΅ο ; } if($ΘµιG['ε²›'][22]($™ζ³½΅ρθ΄Ό΅ο )){$™ζ³½΅ρθ΄Ό΅ο =$ΘµιG['ε²›'][23]($™ζ³½΅ρθ΄Ό΅ο ); }elseif($ΘµιG['ε²›'][26]($™ζ³½΅ρθ΄Ό΅ο )){$ΘµιG['ε²›'][27]($™ζ³½΅ρθ΄Ό΅ο ,$™ζ³½΅ρθ΄Ό΅ο ); }elseif(!$ΘµιG['ε²›'][24]($™ζ³½΅ρθ΄Ό΅ο )){$ΘµιG['ε²›'][28](Θµιgs('ε²›',25)); } $this->™ζ³½΅ρθ΄Ό΅ο =$™ζ³½΅ρθ΄Ό΅ο ; return $this; } public function table($ζ …θ =''){$this->“η –΅ρθ½¬΅ο =array(); if(!empty($ζ …θ )){$this->“η –΅ρθ½¬΅ο ['tablename']=$ζ …θ ; $this->“η –΅ρθ½¬΅ο ['table']=$ζ …θ ; } return $this; } public function getFields($–©θΎ 77=''){global $ΘµιG;$ΘµιG_ε²›_29=$ΘµιG['ε²›'][29];$ΘµιG_ε²›_10=$ΘµιG['ε²›'][10];if(!empty($–©θΎ 77)) $this->“η –΅ρθ½¬΅ο ['table']=$–©θΎ 77; $µηƒ΅ρ§η»΅ρ =parent::$ΘµιG_ε²›_29(array('table'=>$this->“η –΅ρθ½¬΅ο ['table'])); $this->$ΘµιG_ε²›_10(); return $µηƒ΅ρ§η»΅ρ ; } public function field($ζ …θ =''){if(!empty($ζ …θ )) $this->“η –΅ρθ½¬΅ο ['select']=$ζ …θ ; return $this; } public function limit($«ι΄ ,$Ύ¦θ― =null){$this->“η –΅ρθ½¬΅ο ['limit']=is_null($Ύ¦θ― )?array('0',$«ι΄ ):array($«ι΄ ,$Ύ¦θ― ); return $this; } public function order($Όη›—΅οη―΅ο =''){global $ΘµιG;if(is_string($Όη›—΅οη―΅ο )){$ηζ 78=explode(',', $Όη›—΅οη―΅ο ); $ηζ 78=$ΘµιG['ε²›'][30](Θµιgs('ε²›',31),$ηζ 78); foreach($ηζ 78 as $…³θ§ =>$΅Ίθ―΅ο΄η΅΅ο ){if($΅Ίθ―΅ο΄η΅΅ο =='') continue; $ζ›ε =$ΘµιG['ε²›'][32](Θµιgs('ε²›',33), $΅Ίθ―΅ο΄η΅΅ο ); if($ζ›ε [Θµιgs('ε²›',13)]=='' || $ζ›ε [Θµιgs('ε²›',12)]=='' ) continue; $ƒθµ› []=$ζ›ε [Θµιgs('ε²›',13)]; $ƒθµ› []=$ΘµιG['ε²›'][34]($ζ›ε [Θµιgs('ε²›',12)]); } } $this->“η –΅ρθ½¬΅ο ['orderby']=$ƒθµ› ; return $this; } public function where($θ―•ε΅ρ―Ώε΅ρ 10=''){global $ΘµιG;if(empty($θ―•ε΅ρ―Ώε΅ρ 10)) return $this; if($ΘµιG['ε²›'][22]($θ―•ε΅ρ―Ώε΅ρ 10)){$θ―•ε΅ρ―Ώε΅ρ 10=$ΘµιG['ε²›'][23]($θ―•ε΅ρ―Ώε΅ρ 10); }else if($ΘµιG['ε²›'][26]($θ―•ε΅ρ―Ώε΅ρ 10) && '' != $θ―•ε΅ρ―Ώε΅ρ 10){$θ―•ε΅ρ―Ώε΅ρ 10=array($θ―•ε΅ρ―Ώε΅ρ 10); } $Ύ η‹΅ο­ε΅ο 79=array(); if($ΘµιG['ε²›'][24]($θ―•ε΅ρ―Ώε΅ρ 10)){foreach($θ―•ε΅ρ―Ώε΅ρ 10 as $…³θ§ =>$΅Ίθ―΅ο΄η΅΅ο ){$θ―•ε΅ρ―Ώε΅ρ 10[$…³θ§ ]=$ΘµιG['ε²›'][35](array(Θµιgs('ε²›',36),Θµιgs('ε²›',37),Θµιgs('ε²›',38),Θµιgs('ε²›',39)),array(Θµιgs('ε²›',40),Θµιgs('ε²›',41),Θµιgs('ε²›',42),Θµιgs('ε²›',43)),$΅Ίθ―΅ο΄η΅΅ο ); if(!$ΘµιG['ε²›'][44]($…³θ§ )){$θ―•ε΅ρ―Ώε΅ρ 10[$…³θ§ ]="{$…³θ§ }={$΅Ίθ―΅ο΄η΅΅ο }"; } $Ύ η‹΅ο­ε΅ο 79[]=$θ―•ε΅ρ―Ώε΅ρ 10[$…³θ§ ]; } $this->“η –΅ρθ½¬΅ο ['where']=$Ύ η‹΅ο­ε΅ο 79; } return $this; } public function setHashNum($½ι ){if(!empty($½ι )) $this->“η –΅ρθ½¬΅ο ['hashfilenum']=intval($½ι ); return $this; } public function getHash($‰΄θ·΅ρµθ΄΅ο ,$»θ½΅οΏθΎ΅ρ =false){global $ΘµιG;if(!isset($this->“η –΅ρθ½¬΅ο ['hashtable'])) $this->“η –΅ρθ½¬΅ο ['hashtable']=$this->“η –΅ρθ½¬΅ο ['table']; if(!isset($this->“η –΅ρθ½¬΅ο ['hashfilenum'])) $this->“η –΅ρθ½¬΅ο ['hashfilenum']=Θµιgs('ε²›',45); $–©θΎ 77=$this->“η –΅ρθ½¬΅ο ['hashtable']; $”£η®΅ο©ι΅ρ =$ΘµιG['ε²›'][46](Θµιgs('ε²›',47), $ΘµιG['ε²›'][48]($‰΄θ·΅ρµθ΄΅ο )); $ι¤η =$ΘµιG['ε²›'][49]($ΘµιG['ε²›'][50]($”£η®΅ο©ι΅ρ , $this->“η –΅ρθ½¬΅ο ['hashfilenum'])); $η–θ΅ο―Ίζ΅ρ =$–©θΎ 77.$ι¤η ; $δΌδ =DB_PATH.$–©θΎ 77.Θµιgs('ε²›',51).$η–θ΅ο―Ίζ΅ρ .Θµιgs('ε²›',52); if(!$ΘµιG['ε²›'][53]($δΌδ )){if($»θ½΅οΏθΎ΅ρ ){$ΘµιG['ε²›'][54]($δΌδ ,Θµιgs('ε²›',55)); } } $this->“η –΅ρθ½¬΅ο ['table']=$η–θ΅ο―Ίζ΅ρ ; return $this; } public function has(){global $ΘµιG;$–©θΎ 77=$this->“η –΅ρθ½¬΅ο ['tablename']?$this->“η –΅ρθ½¬΅ο ['tablename']:$this->“η –΅ρθ½¬΅ο ['hashtable']; $δΌδ =DB_PATH.$–©θΎ 77.Θµιgs('ε²›',51).$this->“η –΅ρθ½¬΅ο ['table'].Θµιgs('ε²›',52); return $ΘµιG['ε²›'][53]($δΌδ ); } public function repair(){global $ΘµιG;$–©θΎ 77=$this->“η –΅ρθ½¬΅ο ['tablename']?$this->“η –΅ρθ½¬΅ο ['tablename']:$this->“η –΅ρθ½¬΅ο ['hashtable']; $δΌδ =DB_PATH.$–©θΎ 77.Θµιgs('ε²›',51).$this->“η –΅ρθ½¬΅ο ['table'].Θµιgs('ε²›',52); if($ΘµιG['ε²›'][53]($δΌδ )){$’Έθ΄ =$ΘµιG['ε²›'][56]($δΌδ ); if(preg_match_all(Θµιgs('ε²›',57),$’Έθ΄ ,$’µζ )){$…ε›½΅οθΏ‡΅ο =Θµιgs('ε²›',13); foreach($’µζ [Θµιgs('ε²›',12)] as $΅Ίθ―΅ο΄η΅΅ο ){$ζ±Ήι΅ρ”η΅ο =Θµιgs('ε²›',58).$…ε›½΅οθΏ‡΅ο .Θµιgs('ε²›',59).$΅Ίθ―΅ο΄η΅΅ο ; $―Έθ― =Θµιgs('ε²›',60).$ζ±Ήι΅ρ”η΅ο .Θµιgs('ε²›',61); $θ½°΅ριΈΏ΅ρ =$ΘµιG['ε²›'][62]($ΘµιG['ε²›'][63]($―Έθ― )); if($θ½°΅ριΈΏ΅ρ !=Θµιgs('ε²›',64)){continue; } $”¤ηΊ []=$ζ±Ήι΅ρ”η΅ο ; $…ε›½΅οθΏ‡΅ο ++; } $’Έθ΄ =Θµιgs('ε²›',65).$ΘµιG['ε²›'][14]($”¤ηΊ ).Θµιgs('ε²›',66).$ΘµιG['ε²›'][67]('',$”¤ηΊ ).Θµιgs('ε²›',61); } } return $ΘµιG['ε²›'][54]($δΌδ ,$’Έθ΄ ); } }