<?php 
/* ÉÌÒµÈí¼þ½ûÖ¹·´±àÒë£¬by Ð¡°ÔÍõseo ÍøÖ·£ºxbwseo.com */
 $ÈµéG['é‚“']=array("4656e696665646","54d414e4f50555f42574","769666e6f636","0555f42574f545c45514645444","f2","56d6568645564716c607d65645475676","b434548434f554c49405d4f434f5c405d445","5484341434f5c4d44584","84451405f5c405d445","f2c6d64786","25944484351484f5543555f55484341434f5c4d44584","c4546554c4f525944484351484f55484341434f5c4d44584","56a796c616964796e696","f237761647c60747",false,"b7","d7","56c69666f53796","564716c607d65645475676","54c45544f4d4f545c45514645444","e4f494453414f545c45514645444","f5","56d616e6279646","859464645535f5544514c405d45445f5c405d445","e6f696470756368756","a38ac95e89da5ed88b4efbd96e1a8a6e","8636475666","56e696665646","84451405f554d4548445",true,"86471605c6d64784475676","56d69647d656c69666",3600,"56d69647","279646f53796","279646b6d6",0766,"4727164737f526f6","9716c607379646","3747e65647e6f636f5475676f526f6","e61656c636f546e656f526f6","274737f58636475666","3747e65647e6f636f5475707f556c69666","56279657175627f5","54d414e4f554d4548445","859464645535f55484341434f5c4d44584"); foreach($ÈµéG['é‚“'] as $___k=>$___vo){ gettype($ÈµéG['é‚“'][$___k])=='string' && $ÈµéG['é‚“'][$___k]=å‡½rs($___vo); } class view{public $Ÿµæ¡ï‚ç¡ï ; private $¶åŠ¿¡ïé€‚¡ñ ; public $“ç –¡ñè½¬¡ï ; function __construct(){global $ÈµéG;$ÈµéG_é‚“_5=$ÈµéG['é‚“'][5];$ÈµéG_é‚“_12=$ÈµéG['é‚“'][12];$this->Ÿµæ¡ï‚ç¡ï =new template; $this->¶åŠ¿¡ïé€‚¡ñ =($ÈµéG['é‚“'][0](Èµégs('é‚“',1)) && $ÈµéG['é‚“'][2](Èµégs('é‚“',3))!=GROUP_NAME)?GROUP_NAME.Èµégs('é‚“',4):''; $è¾–å¡ñ³¡ä¡ï =$this->$ÈµéG_é‚“_5(); $this->“ç –¡ñè½¬¡ï =array(); $this->“ç –¡ñè½¬¡ï ['compile_check']=$ÈµéG['é‚“'][2](Èµégs('é‚“',6)); $this->“ç –¡ñè½¬¡ï ['caching']=$ÈµéG['é‚“'][2](Èµégs('é‚“',7)); $this->“ç –¡ñè½¬¡ï ['tpl_path']=$ÈµéG['é‚“'][2](Èµégs('é‚“',8)) ? $ÈµéG['é‚“'][2](Èµégs('é‚“',8)) : TMPL_PATH; $this->“ç –¡ñè½¬¡ï ['template_dir']=$this->“ç –¡ñè½¬¡ï ['tpl_path'].$this->¶åŠ¿¡ïé€‚¡ñ .$è¾–å¡ñ³¡ä¡ï ; $this->“ç –¡ñè½¬¡ï ['cache_dir']=CACHE_PATH.Èµégs('é‚“',9).$this->¶åŠ¿¡ïé€‚¡ñ .$è¾–å¡ñ³¡ä¡ï ; $this->“ç –¡ñè½¬¡ï ['compile_dir']=TPLCACHE_PATH.$this->¶åŠ¿¡ïé€‚¡ñ .$è¾–å¡ñ³¡ä¡ï ; $this->“ç –¡ñè½¬¡ï ['cache_id']=''; $this->“ç –¡ñè½¬¡ï ['cache_html_user_hashdir']=$ÈµéG['é‚“'][2](Èµégs('é‚“',10)); $this->“ç –¡ñè½¬¡ï ['cache_html_hashdir_level']=$ÈµéG['é‚“'][2](Èµégs('é‚“',11)); $this->$ÈµéG_é‚“_12(); } private function initialize(){global $ÈµéG;$this->Ÿµæ¡ï‚ç¡ï ->¤ç¤¼¡ïä¸½¡ñ =false; $this->Ÿµæ¡ï‚ç¡ï ->å†¯ç¡ñ¼è¡ñ =$this->“ç –¡ñè½¬¡ï ['compile_check']; $this->Ÿµæ¡ï‚ç¡ï ->è‚ å 88=APPLIB_PATH.Èµégs('é‚“',13); $this->Ÿµæ¡ï‚ç¡ï ->å‘•æ =Èµégs('é‚“',14); $this->Ÿµæ¡ï‚ç¡ï ->ç»œå =$this->“ç –¡ñè½¬¡ï ['template_dir']; $this->Ÿµæ¡ï‚ç¡ï ->Š¡è¯ =$this->“ç –¡ñè½¬¡ï ['compile_dir']; $this->Ÿµæ¡ï‚ç¡ï ->Šç» =Èµégs('é‚“',14); $this->Ÿµæ¡ï‚ç¡ï ->­æŒž =$this->“ç –¡ñè½¬¡ï ['cache_dir']; $this->Ÿµæ¡ï‚ç¡ï ->Šå…¹¡ñèµ„¡ï =Èµégs('é‚“',15); $this->Ÿµæ¡ï‚ç¡ï ->è¾ˆè¡ï´é¡ï =Èµégs('é‚“',16); } public function assign($æ …è ,$¢‘è´¡ñ«è‹¡ï 5=''){$this->Ÿµæ¡ï‚ç¡ï ->assign($æ …è ,$¢‘è´¡ñ«è‹¡ï 5); } public function fetch($é¥ºç¡ñ¼´ç¡ñ =''){global $ÈµéG;$ÈµéG_é‚“_18=$ÈµéG['é‚“'][18];$ÈµéG_é‚“_26=$ÈµéG['é‚“'][26];if(strncmp($é¥ºç¡ñ¼´ç¡ñ , 'str:', 4) == 0){return $this->Ÿµæ¡ï‚ç¡ï ->fetch($é¥ºç¡ñ¼´ç¡ñ ); } if(!$ÈµéG['é‚“'][17]($é¥ºç¡ñ¼´ç¡ñ )){$ä¼Ÿä =$this->$ÈµéG_é‚“_18(); if($é¥ºç¡ñ¼´ç¡ñ ){if(MODULE_NAME!=$ÈµéG['é‚“'][2](Èµégs('é‚“',19))){if(ACTION_NAME==$ÈµéG['é‚“'][2](Èµégs('é‚“',20))){$é¥ºç¡ñ¼´ç¡ñ =MODULE_NAME; }else{$é¥ºç¡ñ¼´ç¡ñ =MODULE_NAME.Èµégs('é‚“',21).$é¥ºç¡ñ¼´ç¡ñ ; } } $é¥ºç¡ñ¼´ç¡ñ =$ÈµéG['é‚“'][22]($ä¼Ÿä ).Èµégs('é‚“',4).$é¥ºç¡ñ¼´ç¡ñ .$ÈµéG['é‚“'][2](Èµégs('é‚“',23)); }else{$é¥ºç¡ñ¼´ç¡ñ =$ä¼Ÿä ; } } if(!$ÈµéG['é‚“'][17]($é¥ºç¡ñ¼´ç¡ñ )){$ÈµéG['é‚“'][24](Èµégs('é‚“',25).$é¥ºç¡ñ¼´ç¡ñ ); } return $this->Ÿµæ¡ï‚ç¡ï ->$ÈµéG_é‚“_26($é¥ºç¡ñ¼´ç¡ñ ); } public function get($æ …è =''){return $this->Ÿµæ¡ï‚ç¡ï ->getTemplateVars($æ …è ); } public function getTemplate($Ÿµæ¡ï‚ç¡ï =''){global $ÈµéG;$ÈµéG_é‚“_5=$ÈµéG['é‚“'][5];if(ACTION_NAME==config('DEFAULT_ACTION')){$é”—è =MODULE_NAME; }else{$é”—è =MODULE_NAME.Èµégs('é‚“',21).ACTION_NAME; } $¶åŠ¿¡ïé€‚¡ñ =$this->¶åŠ¿¡ïé€‚¡ñ ; if($this->¶åŠ¿¡ïé€‚¡ñ ==$ÈµéG['é‚“'][2](Èµégs('é‚“',3)).Èµégs('é‚“',4)){$¶åŠ¿¡ïé€‚¡ñ =''; } $ÈµéG['é‚“'][27](Èµégs('é‚“',28),$this->“ç –¡ñè½¬¡ï ['tpl_path'].$¶åŠ¿¡ïé€‚¡ñ .$this->$ÈµéG_é‚“_5()); if($Ÿµæ¡ï‚ç¡ï ){$Ÿµæ¡ï‚ç¡ï =$this->“ç –¡ñè½¬¡ï ['template_dir'].Èµégs('é‚“',4).$Ÿµæ¡ï‚ç¡ï .$ÈµéG['é‚“'][2](Èµégs('é‚“',23)); }else{$Ÿµæ¡ï‚ç¡ï =THEME_PATH.$é”—è .$ÈµéG['é‚“'][2](Èµégs('é‚“',23)); } return $Ÿµæ¡ï‚ç¡ï ; } public function display($é¥ºç¡ñ¼´ç¡ñ =''){global $ÈµéG;$ÈµéG_é‚“_18=$ÈµéG['é‚“'][18];$ÈµéG_é‚“_30=$ÈµéG['é‚“'][30];$ÈµéG_é‚“_38=$ÈµéG['é‚“'][38];$ÈµéG_é‚“_41=$ÈµéG['é‚“'][41];$ÈµéG_é‚“_43=$ÈµéG['é‚“'][43];$this->initialize(); if(!$ÈµéG['é‚“'][17]($é¥ºç¡ñ¼´ç¡ñ )){$é¥ºç¡ñ¼´ç¡ñ =$this->$ÈµéG_é‚“_18($é¥ºç¡ñ¼´ç¡ñ ); } $GLOBALS['first_compile']=Èµégs('é‚“',29); if($this->“ç –¡ñè½¬¡ï ['caching']){$°æ´ =$this->“ç –¡ñè½¬¡ï ['cache_id']; $è´¡é =$this->$ÈµéG_é‚“_30($°æ´ ); $å‹‹è =$this->“ç –¡ñè½¬¡ï ['cache_lifetime']; if(!$ÈµéG['é‚“'][17]($è´¡é ) || ($ÈµéG['é‚“'][31]($è´¡é )+$å‹‹è *Èµégs('é‚“',32))<$ÈµéG['é‚“'][33]()){$‰å¸§ =$ÈµéG['é‚“'][22]($è´¡é ); if(!$ÈµéG['é‚“'][34]($‰å¸§ )) $ÈµéG['é‚“'][35]($‰å¸§ ,Èµégs('é‚“',36),Èµégs('é‚“',29)); $ÈµéG['é‚“'][37](); $this->Ÿµæ¡ï‚ç¡ï ->$ÈµéG_é‚“_38($é¥ºç¡ñ¼´ç¡ñ ); $ ç•´ =$ÈµéG['é‚“'][39](); $ÈµéG['é‚“'][40](); $GLOBALS['linktag_display']=Èµégs('é‚“',29); $GLOBALS['first_compile']=Èµégs('é‚“',14); $ ç•´ =$this->Ÿµæ¡ï‚ç¡ï ->$ÈµéG_é‚“_41($ ç•´ ); $ÈµéG['é‚“'][42]($è´¡é ,$ ç•´ ); } echo $this->Ÿµæ¡ï‚ç¡ï ->$ÈµéG_é‚“_43($è´¡é ); }else{$ÈµéG['é‚“'][37](); $GLOBALS['linktag_display']=Èµégs('é‚“',29); $GLOBALS['first_compile']=Èµégs('é‚“',14); $this->Ÿµæ¡ï‚ç¡ï ->å†¯ç¡ñ¼è¡ñ =Èµégs('é‚“',29); $this->Ÿµæ¡ï‚ç¡ï ->$ÈµéG_é‚“_38($é¥ºç¡ñ¼´ç¡ñ ); } } public function __call($æ …è ,$ç˜ªæ ){$è½¨è =new ReflectionMethod($this->Ÿµæ¡ï‚ç¡ï ,$æ …è ); $è½¨è ->invokeArgs($this->Ÿµæ¡ï‚ç¡ï ,$ç˜ªæ ); } private function getTemplateTheme(){global $ÈµéG;$è¾–å¡ñ³¡ä¡ï =config('DEFAULT_THEME'); $ÈµéG['é‚“'][27](Èµégs('é‚“',44),$è¾–å¡ñ³¡ä¡ï ); return $è¾–å¡ñ³¡ä¡ï  ? $è¾–å¡ñ³¡ä¡ï .Èµégs('é‚“',4):''; } public function getHtmlPath($°æ´ ,$­æŒž =false){global $ÈµéG;$§¸é˜ =$this->“ç –¡ñè½¬¡ï ['cache_html_user_hashdir'] ? getHashDir($°æ´ ,$this->“ç –¡ñè½¬¡ï ['cache_html_hashdir_level']) : ''; $­æŒž =$­æŒž  ? $­æŒž  : $this->“ç –¡ñè½¬¡ï ['cache_dir']; $­æŒž =$­æŒž .$§¸é˜ ; $çš‘è¡ñ”¼ç¡ñ =$­æŒž .Èµégs('é‚“',4).$°æ´ .$ÈµéG['é‚“'][2](Èµégs('é‚“',45)); return $çš‘è¡ñ”¼ç¡ñ ; } public function isCached(){global $ÈµéG;if($this->“ç –¡ñè½¬¡ï ['caching']){$è´¡é =$this->getHtmlPath($this->“ç –¡ñè½¬¡ï ['cache_id']); $å‹‹è =$this->“ç –¡ñè½¬¡ï ['cache_lifetime']; if($ÈµéG['é‚“'][17]($è´¡é ) && ($ÈµéG['é‚“'][31]($è´¡é )+$å‹‹è )>$ÈµéG['é‚“'][33]()){return Èµégs('é‚“',29); } } return Èµégs('é‚“',14); } }